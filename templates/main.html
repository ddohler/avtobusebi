{% extends "base.html" %}
{% block script %}
{% if olmap %}{{ olmap.media }}{% endif %}
{% endblock %}<!--script-->

{% block content %}
<ul id="routes-list">
    {% for route in routes %}
        <li>{{ route.number }}</li>
    {% endfor %}
</ul>
{% if olmap %}{{ olmap }}{% endif %}
{% endblock %} <!--content-->
{% block bottomscript %}
<script type="text/javascript">
    $(document).ready(function(){ // Hide/Show overlays on clicking corresponding <li>s.
        // Turn off all overlayer to start
        for(i=1; i<myMap.layers.length-1; i++) { // Skip base layer(0) and last layer, which is apparently important.
            myMap.layers[i].setVisibility(false);
        }
        // Toggle overlayer when corresponding route number is clicked
        $('#routes-list li').click(function() { 
            layer = myMap.getLayersByName($(this).html())[0];
            if(layer.getVisibility()){ // Layer is visible
                $(this).removeClass('highlight');
                layer.setVisibility(false);
            }else{
                $(this).addClass('highlight');
                layer.setVisibility(true);
            }
        });
    });
</script>
{% endblock bottomscript %}
